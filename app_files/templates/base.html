<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <!-- PWA Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#0a0a0a">
    <!-- Link to the favicon -->
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='logo.png') }}">
    <link rel="apple-touch-icon" href="{{ url_for('static', filename='logo.png') }}">
    <!-- PWA Manifest -->
    <link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}">
    <!-- Block for page-specific titles -->
    <title>{% block title %}RUNR{% endblock %}</title> 
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <!-- Your Custom CSS (Load AFTER Bootstrap) -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body {% block body_attributes %}{% endblock %}>
    <!-- Move Nav outside main-content -->
    <nav class="main-nav">
        <div class="nav-brand">
             <a href="{{ url_for('index') }}" style="color: inherit; text-decoration: none;">RUNR</a>
        </div>
        <button class="nav-toggle" id="nav-toggle" aria-label="Toggle navigation">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
        </button>
        <div class="nav-links" id="nav-links">
            <a href="{{ url_for('index') }}">Promo</a>
            <a href="{{ url_for('profiles_page') }}">Profiles</a>
            <a href="{{ url_for('history_page') }}">History</a>
            <a href="{{ url_for('balances_page') }}">Balances</a>
            <a href="{{ url_for('monitoring_page') }}">Monitor</a>
            <a href="{{ url_for('services_page') }}">Services</a>
        </div>
    </nav>

    <!-- Wrap content separately -->
    <div class="main-content-wrapper">
        <div class="main-content">
            <!-- Content block for specific pages -->
            {% block content %}{% endblock %}
        </div>
    </div>

    <div id="toast-container"></div> 

    <!-- Common JS -->
    <script src="{{ url_for('static', filename='script.js') }}?v=1.7" defer></script>
    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/static/sw.js')
                    .then(registration => {
                        console.log('ServiceWorker registration successful');
                    })
                    .catch(err => {
                        console.log('ServiceWorker registration failed: ', err);
                    });
            });
        }
    </script>
    {% block scripts %}{% endblock %}
</body>
</html>